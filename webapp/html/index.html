<html>
  <head>
     <meta name="viewport" content="width=device-width initial-scale=1.0 maximum-scale=1.0 user-scalable=yes">

    <script src="../js/socket_io.js" type="text/javascript"></script>
    <script src="../js/jquery-2.1.4.js" type="text/javascript"></script>
    <script type="text/javascript" src="../js/Tone.js"></script>
    <script src="../js/semantic.js" type="text/javascript"></script>
    <link href="../css/semantic.css" rel="stylesheet" type="text/css">

  <body>
    <style type="text/css">
      .content{
          margin-left: 100px;
          text-align:center;
          vertical-align: middle;
      }
    </style>
    <script>
      var socket = io.connect();
      var room = -1;
      var color = ['#dc143c','#ffa500','#ffd700','#3cb371','#1e90ff','#00bfff','#9932cc'];

      $(document).ready(function() {
        var synth = new Tone.Synth().toMaster();
        
        socket.on("part", function(part) {
          var pianoPart = new Tone.Part(
          function(time, note){
            synth.triggerAttackRelease(note.noteName,note.duration,time,note.velocity);
          }, part).start(0);
          Tone.Transport.start();
          // setTimeout(function(){
              socket.emit("ack","played");
          // }, 2000);
        });
        socket.on("command",function(cmd){
            if(cmd == "chooseSong"){
                console.log("plz choose a song !");
            }

        })
       $('.item').click(function(){
          $('.item').removeClass('active');
          $(this).addClass('active');

          if(room != -1)
            socket.emit("leave", color[room]);

          room = $('.item').index(this)-1;
          socket.emit("join", color[room]);
          $('body').css('background', color[room]);
       });
      });
    </script>

  </head>
  <div class="ui grid">
    <div class="row">
        <div class="ui vertical menu six wide column">
          <div class="header item">ROOM</div>
            <a class="item">
              red
            </a>
            <a class="item">
              orange
            </a>
            <a class="item">
              yellow
            </a>
            <a class="item">
              green
            </a>
            <a class="item">
              blue
            </a>
            <a class="item">
              Indigo
            </a>
            <a class="item">
              purple
            </a>
        </div>

        <div class="content">
         
        </div>
      </div>
    </div>
  </body>
</html>