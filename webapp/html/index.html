<html>
  <head>
    <script src="../js/socket_io.js" type="text/javascript"></script>
    <script src="../js/jquery-2.1.4.js" type="text/javascript"></script>
    <script src="../js/semantic.js" type="text/javascript"></script>
    <link href="../css/semantic.css" rel="stylesheet" type="text/css">

  <body>
    <style type="text/css">
      .content{
         /* position:fixed;
          top: 50%;
          left: 50%;
          width:30em;
          height:18em;
          margin-top: -9em;
          margin-left: -15em;
          width: 518px;
          height: 80px;*/
          margin-left: 200px;
          /*border-style: solid;*/
          text-align:center;
          vertical-align: middle;
      }
      #soundBtn{
        margin-top:100px; 
      }
    </style>
    <script>
      var socket = io.connect();
      var dir = '../resources/scale/';
      var room = -1;
      var color = ['#dc143c','#ffa500','#ffd700','#3cb371','#1e90ff','#00bfff','#9932cc'];
      var sound_dir;
      $(document).ready(function() {

        $('#soundBtn').click(function(){
          // sound = new Audio(sound_dir);
          // sound.play();
          socket.emit("ack","played");
          $('#soundBtn').fadeOut('fast');
        });

        $('#soundBtn').hide();

          socket.on("command", function(cmd) {
          if(cmd == 'play' && room != -1){
              sound_dir = dir+''+String.fromCharCode(65+room)+'.mp3';
              $('#sound').attr('src',sound_dir);
              $('#soundBtn').fadeIn('fast');
          }
        });

       $('.item').on('click', function() {
          $('.item').removeClass('active');
          $(this).addClass('active');

          if(room != -1)
            socket.emit("leave", color[room]);

          $('#soundBtn').hide();

          room = $('.item').index(this)-1;
          socket.emit("join", color[room]);
          $('body').css('background', color[room]);
        });             
      });
        function play_sound(){
          var s = document.getElementById('sound');
          s.play();
        }
    </script>

  </head>
  <div class="ui grid">
    <div class="row">
        <div class="ui vertical menu two wide column">
          <div class="header item">ROOM</div>
            <a class="item">
              red
            </a>
            <a class="item">
              orange
            </a>
            <a class="item">
              yellow
            </a>
            <a class="item">
              green
            </a>
            <a class="item">
              blue
            </a>
            <a class="item">
              Indigo
            </a>
            <a class="item">
              purple
            </a>
        </div>

        <div class="content two wide column">
            <button id="soundBtn" class="circular ui icon button" onclick="play_sound()">
              <i class="massive icon Sound"></i>
              <audio id='sound'></audio>
            </button>

        </div>
      </div>
    </div>
  </body>
</html>